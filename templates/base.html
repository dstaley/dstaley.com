<!DOCTYPE html>
<html lang="en" class="md:text-xl">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    {%- if page.title -%}
      <title>{{ page.title }} - {{ config.title }}</title>
    {%- else -%}
      <title>{{ config.title }}</title>
    {%- endif -%}
    <meta name="theme-color" content="tomato">
    {%- if page.description -%}
      <meta name="description" content="{{ page.description }}">
    {%- else -%}
      <meta name="description" content="{{ config.description }}">
    {%- endif -%}

    {%- if page.extra.has_opengraph or section.extra.has_opengraph -%}
      <meta property="og:site_name" content="{{ config.title }}">
      {%- if page.title -%}
        <meta property="og:title" content="{{ page.title | escape }}">
        <meta name="twitter:title" content="{{ page.title | escape }}">
      {%- else -%}
        <meta property="og:title" content="{{ config.title | escape }}">
        <meta name="twitter:title" content="{{ config.title | escape }}">
      {%- endif -%}
      {%- if current_path == "/" -%}
        <meta property="og:type" content="website">
        <meta property="og:image" content="{{ resize_image(path='img/avi.jpg', width=300, height=300) | get(key='url') | safe }}">
        <meta name="twitter:image" content="{{ resize_image(path='img/avi.jpg', width=300, height=300) | get(key='url') | safe }}">
      {%- else -%}
        <meta property="og:type" content="article">
        <meta property="og:image" content="{{ config.base_url }}/api/og?slug={{ page.relative_path }}">
        <meta name="twitter:image" content="{{ config.base_url }}/api/og?slug={{ page.relative_path }}">
        <meta property="og:image:width" content="1200">
        <meta property="og:image:height" content="630">
      {%- endif -%}
      {%- if page.permalink -%}
        <meta property="og:url" content="{{ page.permalink | safe }}">
        <meta name="twitter:url" content="{{ page.permalink | safe }}">
      {%- elif section.permalink -%}
        <meta property="og:url" content="{{ section.permalink | safe }}">
        <meta name="twitter:url" content="{{ section.permalink | safe }}">
      {%- endif -%}
      {%- if page.description -%}
        <meta property="og:description" content="{{ page.description }}">
        <meta name="twitter:description" content="{{ page.description }}">
      {%- else -%}
        <meta property="og:description" content="{{ config.description }}">
        <meta name="twitter:description" content="{{ config.description }}">
      {%- endif -%}
      {%- if current_path == "/" -%}
        <meta name="twitter:card" content="summary">
      {%- else -%}
        <meta name="twitter:card" content="summary_large_image">
      {%- endif -%}
      <meta name="twitter:site" content="@dstaley">
      <meta name="twitter:creator" content="@dstaley">
    {%- endif -%}

    <link rel="canonical" href="{{ current_url | safe }}">
    <link rel="alternate" type="application/rss+xml" title="{{ config.title }}" href="{{ get_url(path="rss.xml", trailing_slash=false) | safe }}">

    <link rel="shortcut icon" href="/img/rocket.png">

    {%- if current_url is starting_with("http://127.0.0.1:1111/") -%}
      <link rel="stylesheet" href="/index.css">
    {%- else -%}
      <style>{{ load_data(path="static/index.css") | trim | safe }}</style>
    {%- endif -%}
  </head>
  <body class="text-gray-700 dark:bg-shark-950 dark:text-gray-300">
    <div class="max-w-[60ch] mx-auto p-4 mb-32">{% block main %}{% endblock %}</div>
  </body>
</html>
